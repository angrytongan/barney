import{S as ye,i as Ee,s as De,e as v,t as E,c as _,a as y,g as D,d as i,b as k,f as L,D as o,h as We,E as Oe,V as Ye,A as qe,a9 as Be,j as se,m as oe,o as ne,x as F,u as B,v as le,aa as Ge,k as C,n as P,ab as Ne,w as ze,M as Je,W as Ke,r as Qe,ac as Xe,a3 as ke,a2 as Ze}from"../../chunks/vendor-656fd6d9.js";import{L as je}from"../../chunks/LoremIpsum-c37d5197.js";import{E as et}from"../../chunks/EChart-3c628d02.js";function tt(c){let e,s;return{c(){e=v("div"),s=E(c[0]),this.h()},l(r){e=_(r,"DIV",{id:!0,class:!0});var a=y(e);s=D(a,c[0]),a.forEach(i),this.h()},h(){k(e,"id","dragDropArea"),k(e,"class","svelte-16p49yu")},m(r,a){L(r,e,a),o(e,s)},p(r,[a]){a&1&&We(s,r[0])},i:Oe,o:Oe,d(r){r&&i(e)}}}function rt(c,e,s){const r=new Map([["ready","Drop previously generated file here"],["loading","Loading file, stand by..."]]);let a=r.get("ready");const m=Ye();return qe(()=>{const f=Be("#dragDropArea",b=>{s(0,a=r.get("loading")),b.forEach(A=>{const l=new FileReader;l.addEventListener("load",p=>{m("loadedFile",l.result),s(0,a=r.get("ready"))}),l.readAsText(A)})});return()=>{f()}}),[a]}class at extends ye{constructor(e){super();Ee(this,e,rt,tt,De,{})}}function st(c){let e,s;return e=new et({props:{id:c[0],option:c[2],height:c[1],notMerge:!0}}),{c(){se(e.$$.fragment)},l(r){oe(e.$$.fragment,r)},m(r,a){ne(e,r,a),s=!0},p(r,[a]){const m={};a&1&&(m.id=r[0]),a&4&&(m.option=r[2]),a&2&&(m.height=r[1]),e.$set(m)},i(r){s||(F(e.$$.fragment,r),s=!0)},o(r){B(e.$$.fragment,r),s=!1},d(r){le(e,r)}}}const Fe=0,Z=1,ot=2;function nt(c,e,s){let{id:r}=e,{t:a=0}=e,{data:m}=e,{height:f=200}=e,b={};const A=(l,p)=>{const w=[],S=[],u=[],g=[],T=[],N=[],z=[],R=[];let x="9999-99-99",q="0000-00-00";p.forEach(($,M)=>{M>0&&($[Z]<x&&(x=$[Z]),$[Z]>q&&(q=$[Z]))});const V=Ge.fromISO(x),ee=Ge.fromISO(q).diff(V,"days").values.days,J=V.plus({days:ee*l}).toFormat("yyyy-MM-dd");return w.push({text:p[0][p[0].length-1]}),S.push({top:25,type:"scroll"}),u.push({show:!0,trigger:"axis"}),g.push({containLabel:!0,top:50,left:20,right:20,bottom:20}),T.push({type:"time",gridIndex:g.length-1,min:x,max:q}),N.push({type:"value",gridIndex:g.length-1}),[...p.reduce(($,M,O)=>O===0?$:$.add(M[Fe]),new Set)].forEach(($,M)=>{z.push({sourceHeader:!1,source:p.filter(O=>O[Fe]===$).filter(O=>O[Z]<J)}),R.push({type:"line",name:$,symbol:"none",encode:{x:Z,y:ot},datasetIndex:M})}),{animation:!0,title:w,legend:S,tooltip:u,grid:g,xAxis:T,yAxis:N,series:R,dataset:z}};return c.$$set=l=>{"id"in l&&s(0,r=l.id),"t"in l&&s(3,a=l.t),"data"in l&&s(4,m=l.data),"height"in l&&s(1,f=l.height)},c.$$.update=()=>{c.$$.dirty&24&&s(2,b=A(a,m))},[r,f,b,a,m]}class lt extends ye{constructor(e){super();Ee(this,e,nt,st,De,{id:0,t:3,data:4,height:1})}}function Re(c,e,s){const r=c.slice();return r[5]=e[s],r[7]=s,r}function Ue(c){let e,s,r,a,m,f,b,A,l,p,w,S;return s=new je({}),a=new lt({props:{id:"graph-"+c[7],t:c[5].t,data:c[5].data,height:ct}}),f=new je({}),{c(){e=v("div"),se(s.$$.fragment),r=C(),se(a.$$.fragment),m=C(),se(f.$$.fragment),b=C(),this.h()},l(u){e=_(u,"DIV",{id:!0,class:!0});var g=y(e);oe(s.$$.fragment,g),r=P(g),oe(a.$$.fragment,g),m=P(g),oe(f.$$.fragment,g),b=P(g),g.forEach(i),this.h()},h(){k(e,"id",A="graph-container-"+c[7]),k(e,"class","graph svelte-1y2y5qw")},m(u,g){L(u,e,g),ne(s,e,null),o(e,r),ne(a,e,null),o(e,m),ne(f,e,null),o(e,b),p=!0,w||(S=Ne(l=c[2].call(null,e,c[7])),w=!0)},p(u,g){c=u;const T={};g&1&&(T.t=c[5].t),g&1&&(T.data=c[5].data),a.$set(T)},i(u){p||(F(s.$$.fragment,u),F(a.$$.fragment,u),F(f.$$.fragment,u),p=!0)},o(u){B(s.$$.fragment,u),B(a.$$.fragment,u),B(f.$$.fragment,u),p=!1},d(u){u&&i(e),le(s),le(a),le(f),w=!1,S()}}}function it(c){let e,s,r,a,m,f,b,A,l,p,w,S,u,g,T,N,z,R,x,q,V,ie,ee,J,I,K,$,M,O,te,U,pe,ge,re,H,me,ce,Q,ve,de,W,G,fe,j,ue;G=new at({}),G.$on("loadedFile",c[1]);let Y=c[0],d=[];for(let t=0;t<Y.length;t+=1)d[t]=Ue(Re(c,Y,t));const He=t=>B(d[t],1,1,()=>{d[t]=null});return{c(){e=v("p"),s=E("A quick hack combining "),r=v("a"),a=E(`GreenSock's
        ScrollTrigger`),m=E(", "),f=v("a"),b=E("Apache ECharts"),A=E(", "),l=v("a"),p=E("drag-drop"),w=E(" and "),S=v("a"),u=E("Papa Parse"),g=E(`. This demonstrates the
    editor function of dropping a previously prepared `),T=v("code"),N=E(".csv"),z=E(` file,
    and the reader experience of scrolling the data.`),R=C(),x=v("p"),q=E("Right click and save one / some / all of these files (data from "),V=v("a"),ie=E(`Our
        World In Data`),ee=E(")"),J=C(),I=v("ul"),K=v("li"),$=v("a"),M=E("Daily Covid Vaccine doses"),O=C(),te=v("li"),U=v("a"),pe=E("Daily Covid tests"),ge=C(),re=v("li"),H=v("a"),me=E("Life expectancy"),ce=C(),Q=v("p"),ve=E(`then drag and drop them in the area below. Do the scrolly thing. You can
    drop files that you generate yourself. 3 columns, first column is series
    name, 2nd is the date, third is a value. Have a look at the supplied files
    above for more detail.`),de=C(),W=v("div"),se(G.$$.fragment),fe=C(),j=v("div");for(let t=0;t<d.length;t+=1)d[t].c();this.h()},l(t){e=_(t,"P",{});var n=y(e);s=D(n,"A quick hack combining "),r=_(n,"A",{target:!0,href:!0});var h=y(r);a=D(h,`GreenSock's
        ScrollTrigger`),h.forEach(i),m=D(n,", "),f=_(n,"A",{target:!0,href:!0});var ae=y(f);b=D(ae,"Apache ECharts"),ae.forEach(i),A=D(n,", "),l=_(n,"A",{href:!0});var $e=y(l);p=D($e,"drag-drop"),$e.forEach(i),w=D(n," and "),S=_(n,"A",{href:!0});var Ae=y(S);u=D(Ae,"Papa Parse"),Ae.forEach(i),g=D(n,`. This demonstrates the
    editor function of dropping a previously prepared `),T=_(n,"CODE",{});var be=y(T);N=D(be,".csv"),be.forEach(i),z=D(n,` file,
    and the reader experience of scrolling the data.`),n.forEach(i),R=P(t),x=_(t,"P",{});var he=y(x);q=D(he,"Right click and save one / some / all of these files (data from "),V=_(he,"A",{href:!0});var we=y(V);ie=D(we,`Our
        World In Data`),we.forEach(i),ee=D(he,")"),he.forEach(i),J=P(t),I=_(t,"UL",{});var X=y(I);K=_(X,"LI",{});var xe=y(K);$=_(xe,"A",{rel:!0,href:!0});var Le=y($);M=D(Le,"Daily Covid Vaccine doses"),Le.forEach(i),xe.forEach(i),O=P(X),te=_(X,"LI",{});var Se=y(te);U=_(Se,"A",{rel:!0,href:!0});var Te=y(U);pe=D(Te,"Daily Covid tests"),Te.forEach(i),Se.forEach(i),ge=P(X),re=_(X,"LI",{});var Ie=y(re);H=_(Ie,"A",{rel:!0,href:!0});var Ce=y(H);me=D(Ce,"Life expectancy"),Ce.forEach(i),Ie.forEach(i),X.forEach(i),ce=P(t),Q=_(t,"P",{});var Pe=y(Q);ve=D(Pe,`then drag and drop them in the area below. Do the scrolly thing. You can
    drop files that you generate yourself. 3 columns, first column is series
    name, 2nd is the date, third is a value. Have a look at the supplied files
    above for more detail.`),Pe.forEach(i),de=P(t),W=_(t,"DIV",{class:!0});var Ve=y(W);oe(G.$$.fragment,Ve),Ve.forEach(i),fe=P(t),j=_(t,"DIV",{class:!0});var Me=y(j);for(let _e=0;_e<d.length;_e+=1)d[_e].l(Me);Me.forEach(i),this.h()},h(){k(r,"target","_blank"),k(r,"href","https://greensock.com/docs/v3/Plugins/ScrollTrigger"),k(f,"target","_blank"),k(f,"href","https://echarts.apache.org"),k(l,"href","https://www.npmjs.com/package/drag-drop"),k(S,"href","http://papaparse.com"),k(V,"href","https://ourworldindata.org/coronavirus/country/australia"),k($,"rel","external"),k($,"href","csv/daily-covid-vaccination-doses-per-capita.csv"),k(U,"rel","external"),k(U,"href","csv/daily-tests-per-thousand-people-smoothed-7-day.csv"),k(H,"rel","external"),k(H,"href","csv/life-expectancy.csv"),k(W,"class","controls svelte-1y2y5qw"),k(j,"class","page svelte-1y2y5qw")},m(t,n){L(t,e,n),o(e,s),o(e,r),o(r,a),o(e,m),o(e,f),o(f,b),o(e,A),o(e,l),o(l,p),o(e,w),o(e,S),o(S,u),o(e,g),o(e,T),o(T,N),o(e,z),L(t,R,n),L(t,x,n),o(x,q),o(x,V),o(V,ie),o(x,ee),L(t,J,n),L(t,I,n),o(I,K),o(K,$),o($,M),o(I,O),o(I,te),o(te,U),o(U,pe),o(I,ge),o(I,re),o(re,H),o(H,me),L(t,ce,n),L(t,Q,n),o(Q,ve),L(t,de,n),L(t,W,n),ne(G,W,null),L(t,fe,n),L(t,j,n);for(let h=0;h<d.length;h+=1)d[h].m(j,null);ue=!0},p(t,[n]){if(n&1){Y=t[0];let h;for(h=0;h<Y.length;h+=1){const ae=Re(t,Y,h);d[h]?(d[h].p(ae,n),F(d[h],1)):(d[h]=Ue(ae),d[h].c(),F(d[h],1),d[h].m(j,null))}for(Qe(),h=Y.length;h<d.length;h+=1)He(h);ze()}},i(t){if(!ue){F(G.$$.fragment,t);for(let n=0;n<Y.length;n+=1)F(d[n]);ue=!0}},o(t){B(G.$$.fragment,t),d=d.filter(Boolean);for(let n=0;n<d.length;n+=1)B(d[n]);ue=!1},d(t){t&&i(e),t&&i(R),t&&i(x),t&&i(J),t&&i(I),t&&i(ce),t&&i(Q),t&&i(de),t&&i(W),le(G),t&&i(fe),t&&i(j),Je(d,t)}}}const ct=300;function dt(c,e,s){let r=[],a=[];const m=A=>{const l=Xe.parse(A.detail,{skipEmptyLines:!0});if(l.errors.length)alert(data.errors.reduce((p,w)=>p+`${w}<br />`),"");else{const p={t:0,data:l.data};s(0,a=[...a,p])}},f=(A,l)=>{s(0,a[A].t=l.isActive?l.progress:a[A].t,a)},b=(A,l)=>{const p=ke.exports.ScrollTrigger.create({trigger:`#graph-container-${l}`,onUpdate:w=>f(l,w),onLeave:()=>s(0,a[l].t=1,a),onLeaveBack:()=>s(0,a[l].t=0,a)});r=[...r,p]};return qe(()=>{Ze.exports.gsap.registerPlugin(ke.exports.ScrollTrigger),ke.exports.ScrollTrigger.defaults({start:"top 10%",end:"bottom top",pin:!0,scrub:!0,markers:!1})}),Ke(()=>{r.forEach(A=>{A.kill()})}),[a,m,b]}class pt extends ye{constructor(e){super();Ee(this,e,dt,it,De,{})}}export{pt as default};
